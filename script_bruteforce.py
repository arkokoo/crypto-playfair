from utils.bruteforce import bruteforce_playfair
from utils.cipher import playfair

french_letters_frequencies = {
    'E': 17.3, 'P': 3.0, 'A': 8.4, 'G': 1.3, 'S': 8.1, 'V': 1.3,
    'I': 7.3, 'B': 1.1, 'N': 7.1, 'F': 1.1, 'T': 7.1, 'Q': 1.0,
    'R': 6.6, 'H': 0.9, 'L': 6.0, 'X': 0.4, 'U': 5.7, 'J': 0.3,
    'O': 5.3, 'Y': 0.3, 'D': 4.2, 'K': 0.1, 'C': 3.0, 'W': 0.1,
    'M': 3.0, 'Z': 0.1
}

texte_clair = "EllesappelleAngelicaSummerelleadouzeansetelleestcanadienneIlyacinqansmafamilleetmoiavonsdemenagedanslesuddelaFranceMonpereFrankSummerestmecanicieniladorelesvoituresanciennesetcollectionnelesvoituresminiaturesMameresappelleEmilieSummerelleestinfirmieredansunhopitalnonloindenotremaisonNousavonsdemenageenFranceparcequelleaimelaculturedecepaysLavieenFranceesttresdifferentedecelleauCanadaIciilfaitsouventchaudChaquedimanchenousallonsalamagnifiqueplagedeBiarritzetnousachetonsdesglacesapresavoirnagedanslamerLesFrancaissonttressympathiquesetaccueillantsNousparlonsfrancaislorsquenoussommesdehorsalecoleouaumarcheCependantnouscontinuonsdeparleranglaisalamaisoncarmesparentsneveulentpasquelleperdemalanguenatale"
texte_clair = "DansunevalleeverdoyantelesrivieresserpententdoucemententrelescollinesrecouvertesdherbeLesarbressetirentverslecielleursfeuillesdansantaugreduventlegerLesoiseauxchantentmelodieusementcreantunesymphonienaturellequiresonneatraverslacampagneLesmontagnesgeantessedressentalhorizonleurssommetsenneigesbrillantsouslalumieredusoleilUnruisseaumurmureentraversantlaforetdenseoulesanimauxcurieuxobserventsilencieusementlesvisiteursdepassageDeschampsdefleurscoloreessetendentapertedevuecreantuntableaueclatantdecouleursvivesLespapillonsvoltigentgracieusementdunefleuralautreintegrantunetouchedegraceacepaysagefortbienenchanteurLecrepusculeapprocheteintantlecieldenuanceschaudesetpastelLesetoilesemergenttimidementeclairantlanuitdeleureclatscintillantLalunerondeetlumineuseveillesilencieusementsurlaterreendormieCestdanscedecoridylliquequelanaturedevoilesabeautesansfinunesymphoniedeformesetdecouleursquicaptiventlessensetnourrissentlameChaqueinstantchaquebrisechaquerayondesoleilcontribuealharmonieintemporelledecelieumagique"
texte_clair = "IMMyrielEnMCharlesFrancoisBienvenuMyrieletaitevequedeDigneCetaitunvieillarddenvironsoixantequinzeansiloccupaitlesiegedeDignedepuisQuoiquecedetailnetoucheenaucunemaniereaufondmemedecequenousavonsaraconterilnestpeutetrepasinutileneftcequepouretreexactentoutdindiquericilesbruitsetlesproposquiavaientcourusursoncompteaumomentouiletaitarrivedansledioceseVraioufauxcequonditdeshommestientsouventautantdeplacedansleurvieetsurtoutdansleurdestineequecequilsfontMMyrieletaitfilsdunconseillerauparlementdAixnoblessederobeOncontaitdeluiquesonperelereservantpourheriterdesachargelavaitmariedefortbonneheureadixhuitouvingtanssuivantunusageassezrepandudanslesfamillesparlementairesCharlesMyrielnonobstantcemariageavaitdisaitonbeaucoupfaitparlerdeluiIletaitbienfaitdesapersonnequoiquedassezpetitetailleelegantgracieuxspiritueltoutelapremierepartiedesavieavaitetedonneeaumondeetauxgalanteriesLarevolutionsurvintlesevenementsseprecipiterentlesfamillesparlementairesdecimeeschasseestraqueessedisperserentMCharlesMyrieldeslespremiersdelarevolutionemigraenItalieSafemmeymourutdunemaladiedepoitrinedontelleetaitatteintedepuislongtempsIlsnavaientpointdenfantsQuesepassatilensuitedansladestineedeMMyrielLecroulementdelanciennesocietefrancaiselachutedesaproprefamillelestragiquesspectaclesdepluseffrayantsencorepeutetrepourlesemigresquilesvoyaientdeloinaveclegrossissementdelepouvantefirentilsgermerenluidesideesderenoncementetdesolitudeFutilaumilieudunedecesdistractionsetdecesaffectionsquioccupaientsaviesubitementatteintdundecescoupsmysterieuxetterriblesquiviennentquelquefoisrenverserenlefrappantaucoeurlhommequelescatastrophespubliquesnebranleraientpasenlefrappantdanssonexistenceetdanssafortuneNulnauraitpulediretoutcequonsavaitcestquelorsquilrevintdItalieiletaitpretreEnMMyrieletaitcuredeBrignollesIletaitvieuxetvivaitdansuneretraiteprofondeVerslepoqueducouronnementunepetiteaffairedesacureonnesaitplustropquoilamenaaParisEntreautrespersonnespuissantesilallasolliciterpoursesparoissiensMlecardinalFeschaUnquelempereuretaitvenufairevisiteasononcleledignecurequiattendaitdanslantichambresetrouvasurlepassagedesa"
# texte_clair = "EPEPEPEAEAEAEAEAEAEAEAEGESESESESESVSISISIBININININFNTNTNTQTRTRTRTRHRLRLULULULULUOUODODODODCMCMCM"

random_grid = [['W', 'X', 'Y', 'Z', 'A'], ['B', 'C', 'D', 'E', 'F'], ['G', 'H', 'I', 'K', 'L'], ['M', 'N', 'O', 'P', 'Q'], ['R', 'S', 'T', 'U', 'V']]
text_chiffre = playfair(unformatted_string=texte_clair, grid=random_grid, action="chiffrer")
discovered_key, decrypted_text = bruteforce_playfair(text_chiffre, french_letters_frequencies)
print(f"La clé utilisée est : {discovered_key} et le texte déchiffré donne : {decrypted_text}")